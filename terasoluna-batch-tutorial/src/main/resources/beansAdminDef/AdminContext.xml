<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">

    <!-- アノテーションによる設定 -->
    <context:annotation-config />

    <!-- フレームワーク設定ファイルの読み込み -->
    <context:property-placeholder location="appprops/batch.properties" order="1" ignore-unresolvable="true" />

    <!-- メッセージアクセサ -->
    <bean id="msgAcc" class="jp.terasoluna.fw.batch.message.MessageAccessorImpl" />

    <!-- メッセージプロパティファイル設定 -->
    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames" value="application-messages" />
    </bean>

    <!-- ジョブ個別例外ハンドラの解決クラス -->
    <bean id="blogicExceptionHandlerResolver" class="jp.terasoluna.fw.batch.exception.handler.BLogicExceptionHandlerResolverImpl" />

    <!-- ジョブBean定義ファイルの解決クラス -->
    <bean id="blogicApplicationContextResolver" class="jp.terasoluna.fw.batch.executor.ApplicationContextResolverImpl">
        <!-- 共通コンテキスト -->
        <property name="commonContextClassPath" value="classpath:beansDef/commonContext.xml" />
    </bean>

    <!-- ビジネスロジックの解決クラス -->
    <bean id="blogicResolver" class="jp.terasoluna.fw.batch.blogic.BLogicResolverImpl" />

    <!-- ビジネスロジックの実行クラス -->
    <bean id="blogicExecutor" class="jp.terasoluna.fw.batch.executor.worker.BLogicExecutorImpl" />

    <!-- ジョブ起動引数をビジネスロジックの入力パラメータに変換するクラス -->
    <bean id="blogicParamConverter" class="jp.terasoluna.fw.batch.blogic.vo.BLogicParamConverterImpl">
        <constructor-arg index="0">
            <!-- マッパ― -->
            <bean id="blogicParamMapper" class="org.dozer.spring.DozerBeanMapperFactoryBean" />
        </constructor-arg>
    </bean>

    <!-- 非同期型ジョブ実行用スレッドプールタスクエグゼキュータ -->
    <task:executor id="batchTaskExecutor" pool-size="10-10" queue-capacity="10" />

    <!-- 非同期型ジョブ実行機能の停止クラス -->
    <bean id="asyncBatchStopper" class="jp.terasoluna.fw.batch.executor.controller.EndFileStopper" />

</beans>